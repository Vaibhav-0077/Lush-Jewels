<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Account | Jewelry Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 text-gray-800">

  <!-- ðŸŸ£ Include Navbar -->
  <%- include('../partials/header', { session: session }) %>

  <!-- ðŸ§â€â™‚ï¸ Account Section -->
  <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

    <h1 class="text-3xl font-bold text-center text-purple-700 mb-10">ðŸ‘¤ My Account</h1>

    <!-- ðŸ”¹ Profile Details -->
    <section class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 mb-10 border border-purple-100 hover:shadow-xl transition-all duration-300">
      <h2 class="text-xl font-semibold text-purple-700 mb-4 flex items-center gap-2">
        <span class="text-2xl">ðŸ’Ž</span> Profile Details
      </h2>

      <div class="space-y-2 text-gray-700 text-base">
        <p><strong>Name:</strong> <%= user.name || user.username %></p>
        <p><strong>Email:</strong> <%= user.email %></p>
        <!-- <p><strong>Phone:</strong> <%= user.phone || 'Not provided' %></p> -->
      </div>

      <form action="/user/logout" method="POST" class="mt-6">
        <button class="bg-gradient-to-r from-red-500 to-red-700 text-white px-5 py-2.5 rounded-lg shadow hover:scale-105 transition-transform duration-300">
          Logout
        </button>
      </form>
    </section>

    <!-- ðŸ”¹ Orders Section -->
    <section class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 border border-purple-100 hover:shadow-xl transition-all duration-300">
      <h2 class="text-xl font-semibold text-purple-700 mb-4 flex items-center gap-2">
        <span class="text-2xl">ðŸ›’</span> Your Orders
      </h2>

      <% if (orders.length === 0) { %>
        <p class="text-gray-500 text-center py-8 text-lg">You havenâ€™t placed any orders yet.</p>
      <% } else { %>
        <div class="divide-y divide-gray-200">
          <% orders.forEach(order => { %>
            <div class="py-5">
              <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-3">
                <p class="font-medium text-gray-800">ðŸ§¾ <strong>Order ID:</strong> <%= order._id %></p>
                <p class="text-gray-500 text-sm">ðŸ“… <%= new Date(order.date || order.createdAt).toLocaleString() %></p>
              </div>
              <p class="text-gray-700"><strong>Total:</strong> <span class="text-green-600 font-semibold">â‚¹<%= order.total %></span></p>
              <p class="text-gray-700"><strong>Payment:</strong> <%= order.paymentMethod %></p>

              <!-- ðŸ›ï¸ Ordered Items -->
              <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <% order.items.forEach(item => { %>
                  <div class="border border-gray-200 rounded-xl p-3 flex items-center gap-3 bg-gray-50 hover:shadow-md transition-all">
                    <img src="<%= item.img %>" alt="<%= item.name %>" class="w-16 h-16 object-cover rounded-lg">
                    <div>
                      <p class="text-sm font-medium text-gray-800"><%= item.name %></p>
                      <p class="text-xs text-gray-500">â‚¹<%= item.price %> Ã— <%= item.qty %></p>
                    </div>
                  </div>
                <% }) %>
              </div>
            </div>
          <% }) %>
        </div>
      <% } %>
    </section>

  </main>

  <!-- ðŸŸ£ Include Footer -->
  <%- include('../partials/footer') %>


  <script src="/script.js"></script>

</body>
</html>
